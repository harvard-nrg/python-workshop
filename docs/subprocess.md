# Subprocesses
Many neuroimaging analysis functions are implemented as a command line tools that
follows the traditional Unix philosphy 
["does one thing and does it well"](https://en.wikipedia.org/wiki/Unix_philosophy).
The 
[`subprocess`](https://docs.python.org/3/library/subprocess.html)
module makes running these command line tools simple.

```python
import subprocess
```

## Running a subprocess
A simple way to run a subprocess is with
[`subprocess.check_output`](https://docs.python.org/3/library/shutil.html#shutil.rmtree).
The first argument should be your command and the second argument should be 
`shell=True`

```python
output = subprocess.check_output('ls -la', shell=True)

print(output.decode())
```

!!! question "`string.decode()`"
    Python 3 does not assume a
    [character encoding](https://en.wikipedia.org/wiki/Character_encoding)
    for content read in from files or generated by a subprocess.
    _You_ are responsible for calling `.decode()` with the correct character 
    encoding. By default, the character encoding is assumed to be UTF-8, which 
    is backward compatible with ASCII.

## Handling errors
If a subprocess fails, you'll receive a 
[`subprocess.CalledProcessError`](https://docs.python.org/3/library/subprocess.html#subprocess.CalledProcessError).
An unhandled exception will typically crash your program. However, if you want 
to catch the error and handle it in a special way, you can 
wrap the function call in a 
[`try statement`](https://docs.python.org/3/reference/compound_stmts.html#try)

```python
try:
    output = subprocess.check_output('ls -z', shell=True)
except subprocess.CalledProcessError as e:
    print(e.returncode)
```

