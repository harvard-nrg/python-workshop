# Subprocesses

Many neuroimaging analysis tools are implemented as a command line tool that 
[does one thing and does it well](https://en.wikipedia.org/wiki/Unix_philosophy).
The 
[`subprocess`](https://docs.python.org/3/library/subprocess.html)
module makes running command line tools simple.

```python
import subprocess
```

## Running a subprocess

A simple way to run a subprocess is with
[`subprocess.check_output`](https://docs.python.org/3/library/shutil.html#shutil.rmtree).
The first argument will be your command and the second argument will be 
`shell=True`

```python
output = subprocess.check_output('ls -la', shell=True)

print(output.decode())
```

!!! question "`string.decode()`"
    Python will no longer assume a
    [character encoding](https://en.wikipedia.org/wiki/Character_encoding)
    for strings that are read in from files or generated by subprocesses.
    You're responsible for always calling `.decode()` with the known character 
    encoding, which defaults to UTF-8.

## Handling errors

If a subprocess fails, you'll receive a 
[`subprocess.CalledProcessError`](https://docs.python.org/3/library/subprocess.html#subprocess.CalledProcessError).
An unhandled exception will typically crash your program. If you want 
to catch the error and handle it in a particular way, you can 
enclose the function call within a 
[`try statement`](https://docs.python.org/3/reference/compound_stmts.html#try)

```python
try:
    output = subprocess.check_output('ls -z', shell=True)
except subprocess.CalledProcessError as e:
    print(e.returncode)
```

